import { RequestType, ResponseError, ErrorCodes, NotificationType } from './messages';
export { ErrorCodes, ResponseError, RequestType, NotificationType };
export interface IRequestHandler<P, R, E> {
    (params?: P): R | ResponseError<E> | Thenable<R | ResponseError<E>>;
}
export interface INotificationHandler<P> {
    (params?: P): void;
}
export interface ILogger {
    error(message: string): any;
    warn(message: string): any;
    info(message: string): any;
    log(message: string): any;
}
export interface MessageConnection {
    sendNotification<P>(type: NotificationType<P>, params?: P): void;
    onNotification<P>(type: NotificationType<P>, handler: INotificationHandler<P>): void;
    listen(): any;
    dispose(): void;
}
export interface ServerMessageConnection extends MessageConnection {
    onRequest<P, R, E>(type: RequestType<P, R, E>, handler: IRequestHandler<P, R, E>): void;
}
export interface ClientMessageConnection extends MessageConnection {
    sendRequest<P, R, E>(type: RequestType<P, R, E>, params?: P): Thenable<R>;
}
export declare function createServerMessageConnection(inputStream: NodeJS.ReadableStream, outputStream: NodeJS.WritableStream, logger: ILogger): ServerMessageConnection;
export declare function createClientMessageConnection(inputStream: NodeJS.ReadableStream, outputStream: NodeJS.WritableStream, logger: ILogger): ClientMessageConnection;
